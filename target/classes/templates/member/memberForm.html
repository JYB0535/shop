<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" xmlns:action="http://www.w3.org/1999/xhtml"
      layout:decorate="~{layouts/layout1}">

    <th:block layout:fragment="css">
      <style>
          .fieldError {
              color: #bd2130;
          }
      </style>
    </th:block>
<!--                                              빈 객체가지고 필드구성을 일관성있게 따라갈수있다? 이 폼이 제출됐을때 어디에 매핑될건지?? 타임리프로 명확히 표현할수있는 문법-->
    <div layout:fragment="content">
      <form action="/members/new" method="post" th:object="${memberFormDto}">
<!--        아까 모델에 빈 객체를 담아서 보냄 왜? 이 폼이 어떤 dto에 담길 정보를 구성할건지 뭐랬지?? 아무튼 memberformdto에 다시 매핑할건데 유저가 memberformdto가 있는데 거기에 name mail 등등 담아서 줄건데-->
          <div class="form-group">
              <label th:for="name">이름</label>
<!--                                          네임이 명확하세 식별되고 스트링인것도 알음 이래서 빈객체를 가져온거다?-->
              <input type="text" th:field="*{name}" class="form-control" placeholder="이름을 입력해주세요">
<!--                        각 필드에 에러있는지 체크?    네임필드에서 발생한 에러메시지를 이 필드안에 텍스트로 넣어준다-->
              <p th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="fieldError"></p>

<!--            레이블이랑 인풋이 따로 잇는데 둘이 한 덩어리로 만들어줘야함(현재상황)
타임리프에서는 id나 네임을 쓰지 않고 th:for과 th:field로 묶어줌 이름이 같으니까 이 레이블의 인풋이구나 알음
 한번에 쓰는 방법도 있는데(레이블안에 인풋을 집어넣기)-->

<!--            아까 모델에서 빈 객체 전달 이유? 멤버 폼 디티오를 그대로 따라적을거라서? *{name}의미는 멤버 폼 디티오의 필드중 하나인 네임-->
          </div>

        <div class="form-group">
            <label th:for="email">이메일</label>
            <input type="text" th:field="*{email}" class="form-control" placeholder="이메일을 입력해주세요">
            <p th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="fieldError"></p>
        </div>

        <div class="form-group">
            <label th:for="password">비밀번호</label>
            <input type="text" th:field="*{password}" class="form-control" placeholder="비밀번호를 입력해주세요">
            <p th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="fieldError"></p>
        </div>

        <div class="form-group">
            <label th:for="address">주소</label>
            <input type="text" th:field="*{address}" class="form-control" placeholder="주소를 입력해주세요">
            <p th:if="${#fields.hasErrors('address')}" th:errors="*{address}" class="fieldError"></p>
        </div>

        <div style="text-align: center">
          <button type="submit" class="btn btn-primary">제출</button>
        </div>
<!--                                   _csrf(타임리프 내장객체)                    우리 토큰 맞는지 확인하려고?  -->
        <input type="hidden" th:name="${_csrf.getParameterName()}" th:value="${_csrf.getToken()}">

      </form>

    </div>

    <th:block layout:fragment="script">
      <script th:inline="javascript">
        // console.log("페이지 전용 스크립트");
        //window.onload 같은거
        $(document).ready(function(){
            var errorMessage = [[${errorMessage}]];
            if(errorMessage != null) {
                alert(errorMessage);
            }
        });


      </script>
    </th:block>

</html>